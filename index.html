<!doctype html>
<html lang="en" dir="ltr" class="plugin-pages plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Cotton Box</title><meta data-rh="true" property="og:title" content="Cotton Box"><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://glyph-cat.github.io/cotton-box/img/social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://glyph-cat.github.io/cotton-box/img/social-card.jpg"><meta data-rh="true" property="og:url" content="https://glyph-cat.github.io/cotton-box/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="description" content="A flexible toolbox with different types of state managers catered to different scenarios."><meta data-rh="true" property="og:description" content="A flexible toolbox with different types of state managers catered to different scenarios."><link data-rh="true" rel="icon" href="/cotton-box/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://glyph-cat.github.io/cotton-box/"><link data-rh="true" rel="alternate" href="https://glyph-cat.github.io/cotton-box/" hreflang="en"><link data-rh="true" rel="alternate" href="https://glyph-cat.github.io/cotton-box/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://I8EAQVNXNC-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true">function insertBanner(){var n=document.createElement("div");n.id="__docusaurus-base-url-issue-banner-container";n.innerHTML='\n<div id="__docusaurus-base-url-issue-banner" style="border: thick solid red; background-color: rgb(255, 230, 179); margin: 20px; padding: 20px; font-size: 20px;">\n   <p style="font-weight: bold; font-size: 30px;">Your Docusaurus site did not load properly.</p>\n   <p>A very common reason is a wrong site <a href="https://docusaurus.io/docs/docusaurus.config.js/#baseUrl" style="font-weight: bold;">baseUrl configuration</a>.</p>\n   <p>Current configured baseUrl = <span style="font-weight: bold; color: red;">/cotton-box/</span> </p>\n   <p>We suggest trying baseUrl = <span id="__docusaurus-base-url-issue-banner-suggestion-container" style="font-weight: bold; color: green;"></span></p>\n</div>\n',document.body.prepend(n);var e=document.getElementById("__docusaurus-base-url-issue-banner-suggestion-container"),o=window.location.pathname,s="/"===o.substr(-1)?o:o+"/";e.innerHTML=s}document.addEventListener("DOMContentLoaded",(function(){void 0===window.docusaurus&&insertBanner()}))</script><link rel="alternate" type="application/rss+xml" href="/cotton-box/blog/rss.xml" title="Cotton Box RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cotton-box/blog/atom.xml" title="Cotton Box Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Cotton Box" href="/cotton-box/opensearch.xml"><link rel="stylesheet" href="/cotton-box/assets/css/styles.25492ae5.css">
<script src="/cotton-box/assets/js/runtime~main.a412ccb3.js" defer="defer"></script>
<script src="/cotton-box/assets/js/main.8d6d8eb5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cotton-box/"><div class="navbar__logo"><img src="/cotton-box/img/logo.svg" alt="Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cotton-box/img/logo.svg" alt="Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Cotton Box</b></a><a class="navbar__item navbar__link" href="/cotton-box/docs/learn/tutorial">Learn</a><a class="navbar__item navbar__link" href="/cotton-box/docs/api/core">API</a><a class="navbar__item navbar__link" href="/cotton-box/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/glyph-cat/cotton-box" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="colorModeButton_yITp"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 -960 960 960" fill="#000000"><path d="M492-280q83 0 141.5-58.5T692-480t-58.5-141.5T492-680h-16.5q-8.5 0-16.5 2-15 3-19 17.5t7 22.5q38 28 58 69.5t20 88.5q0 48-19 90.5T447-322q-12 8-8.5 22.5T459-283q8 2 16.5 2.5t16.5.5M346-160H240q-33 0-56.5-23.5T160-240v-106l-77-78q-11-12-17-26.5T60-480t6-29.5T83-536l77-78v-106q0-33 23.5-56.5T240-800h106l78-77q12-11 26.5-17t29.5-6 29.5 6 26.5 17l78 77h106q33 0 56.5 23.5T800-720v106l77 78q11 12 17 26.5t6 29.5-6 29.5-17 26.5l-77 78v106q0 33-23.5 56.5T720-160H614l-78 77q-12 11-26.5 17T480-60t-29.5-6T424-83z"></path></svg></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div style="font-weight:600;padding:5px 10px;position:sticky;text-align:center;top:60px;z-index:1;background-color:#ffeecc;color:#aa804a">NOTE: This library is still experimental and documentations might be incomplete.</div><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><header class="hero hero--primary heroBanner_qdFl"><div class="container"><h1 class="hero__title">Cotton Box</h1><p class="hero__subtitle">A flexible toolbox with different types of state managers catered to different scenarios.</p><div class="buttons_AeoN"><a href="/cotton-box/docs/learn/tutorial/setup" class="button button--secondary button--lg">Get started</a></div></div></header><main><section class="features_M4u0"><div class="container"><div class="row"><div class="col col--4"><div class="text--center"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960" class="featureSvg_hcSE" role="img"><path d="m457-386-272-32q-19-2-25-20.5t8-31.5l440-404q4-3 8.5-5t13.5-2q15 0 23 12.5t0 25.5L503-574l272 32q19 2 25 20.5t-8 31.5L352-86q-4 3-8.5 5T330-79q-15 0-23-12.5t0-25.5z"></path></svg></div><div class="text--center padding-horiz--md"><h3>Lightweight &amp; fast</h3><p style="opacity:0.65">Suitable for various projects. From simple PWAs to complex applications and even time-critical games.</p></div></div><div class="col col--4"><div class="text--center"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960" class="featureSvg_hcSE" role="img"><path d="M140-480q0 105 57 190t153 125q12 5 17.5 16.5T367-126q-8 12-21 15.5t-27-2.5q-110-48-174.5-147.5T80-480q0-32 5-64.5t16-63.5l-40 23q-11 6-22.5 3.5T21-595t-3-23 14-18l121-70q11-6 23-3t18 14l70 120q6 11 3 23t-14 18-23 3-18-14l-43-73q-14 33-21.5 67.5T140-480m340-340q-57 0-109.5 18T273-749q-11 8-23.5 7.5T231-753q-7-12-4-26t14-22q52-38 113-58.5T480-880q87 0 165 35.5T780-744v-46q0-13 8.5-21.5T810-820t21.5 8.5T840-790v140q0 13-8.5 21.5T810-620H670q-13 0-21.5-8.5T640-650t8.5-21.5T670-680h85q-48-66-120.5-103T480-820m252 569q51-57 73-129t11-147q-2-13 5.5-23t19.5-10q14 0 24 10.5t12 25.5q8 81-14 157.5T790-227q-44 54-102 89.5T562-88l38 22q11 6 13.5 18T610-25t-17.5 13.5T570-15L448-85q-11-6-14-18t3-23l70-120q6-11 18-14t23 3 13.5 17.5T558-217l-43 76q63-6 119-34.5t98-75.5"></path></svg></div><div class="text--center padding-horiz--md"><h3>Declarative lifecycle management</h3><p style="opacity:0.65">Persist and retrieve data with lifecycle hooks such as <code>init</code>, <code>didSet</code> &amp; <code>didReset</code>.</p></div></div><div class="col col--4"><div class="text--center"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960" class="featureSvg_hcSE" role="img"><path d="M600-160q-134 0-227-93t-93-227 93-227 227-93 227 93 93 227-93 227-227 93m30-333v-117q0-12-8.62-21-8.63-9-21.38-9t-21.37 8.5Q570-623 570-610v130q0 5.57 2 10.78 2 5.22 7 10.22l102 101q8.8 9 20.9 9t21.1-8.84 9-21-9-21.16zM110-610q-12.75 0-21.37-8.68-8.63-8.67-8.63-21.5 0-12.82 8.63-21.32Q97.25-670 110-670h100q12.75 0 21.38 8.68 8.62 8.67 8.62 21.5 0 12.82-8.62 21.32-8.63 8.5-21.38 8.5zM70-450q-12.75 0-21.37-8.68-8.63-8.67-8.63-21.5 0-12.82 8.63-21.32Q57.25-510 70-510h140q12.75 0 21.38 8.68 8.62 8.67 8.62 21.5 0 12.82-8.62 21.32-8.63 8.5-21.38 8.5zm40 160q-12.75 0-21.37-8.68-8.63-8.67-8.63-21.5 0-12.82 8.63-21.32Q97.25-350 110-350h100q12.75 0 21.38 8.68 8.62 8.67 8.62 21.5 0 12.82-8.62 21.32-8.63 8.5-21.38 8.5z"></path></svg></div><div class="text--center padding-horiz--md"><h3>Supports async set-state functions</h3><p style="opacity:0.65">An escape hatch for when you need to set state in conjunction with complicated data-fetching logic.</p></div></div></div></div></section></main><h2 style="margin-top:20px;text-align:center">Quick Demo</h2><div class="sp-498605592 sp-c-fVPbOs sp-c-fVPbOs-gMQIch-variant-light sp-wrapper"><div class="sp-c-ikJbEZ sp-layout"><div class="sp-c-euXojQ sp-editor sp-stack" style="height:500px;flex-grow:50;flex-shrink:50;flex-basis:0;overflow:hidden"><div class="sp-c-gtcpyq sp-code-editor"><div aria-autocomplete="list" aria-label="Code Editor for App.tsx" aria-multiline="true" class="sp-pristine sp-typescript sp-c-jOWzsE sp-c-jkvvao sp-cm" role="textbox" tabindex="0" translate="no"><pre class="sp-c-fWymNx sp-pre-placeholder" style="margin-left:var(--sp-space-11)"><span class="sp-syntax-keyword">import</span> <span class="sp-syntax-punctuation">{</span> <span class="sp-syntax-plain">StateManager</span> <span class="sp-syntax-punctuation">}</span> <span class="sp-syntax-keyword">from</span> <span class="sp-syntax-string">&#x27;cotton-box&#x27;</span>
<span class="sp-syntax-keyword">import</span> <span class="sp-syntax-punctuation">{</span> <span class="sp-syntax-plain">useStateValue</span> <span class="sp-syntax-punctuation">}</span> <span class="sp-syntax-keyword">from</span> <span class="sp-syntax-string">&#x27;cotton-box-react&#x27;</span>
<span class="sp-syntax-keyword">import</span> <span class="sp-syntax-punctuation">{</span> <span class="sp-syntax-plain">ChangeEvent</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">MouseEvent</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">memo</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">useCallback</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">useDeferredValue</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">useEffect</span> <span class="sp-syntax-punctuation">}</span> <span class="sp-syntax-keyword">from</span> <span class="sp-syntax-string">&#x27;react&#x27;</span>
<span class="sp-syntax-keyword">import</span> <span class="sp-syntax-plain">styles</span> <span class="sp-syntax-keyword">from</span> <span class="sp-syntax-string">&#x27;./index.module.css&#x27;</span>

<span class="sp-syntax-keyword">interface</span> IAppState <span class="sp-syntax-punctuation">{</span>
  <span class="sp-syntax-property">notes</span><span class="sp-syntax-punctuation">:</span> Record&lt;string<span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-punctuation">{</span>
    <span class="sp-syntax-property">title</span><span class="sp-syntax-punctuation">:</span> string<span class="sp-syntax-punctuation">,</span>
    <span class="sp-syntax-property">body</span><span class="sp-syntax-punctuation">:</span> string
  <span class="sp-syntax-punctuation">}</span>&gt;
  <span class="sp-syntax-property">currentlyPreviewing</span><span class="sp-syntax-punctuation">:</span> string
<span class="sp-syntax-punctuation">}</span>

<span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">AppState</span> = <span class="sp-syntax-keyword">new</span> <span class="sp-syntax-plain">StateManager</span>&lt;IAppState&gt;<span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">{</span>
  <span class="sp-syntax-property">notes</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span>
  <span class="sp-syntax-property">currentlyPreviewing</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-keyword">null</span><span class="sp-syntax-punctuation">,</span>
<span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">)</span>

<span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">onSelectNote</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">noteId</span><span class="sp-syntax-punctuation">:</span> string<span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span>
  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span>
    <span class="sp-syntax-plain">AppState</span>.<span class="sp-syntax-property">set</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">previousState</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">{</span>
      <span class="sp-syntax-punctuation">...</span><span class="sp-syntax-plain">previousState</span><span class="sp-syntax-punctuation">,</span>
      <span class="sp-syntax-property">currentlyPreviewing</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-plain">noteId</span><span class="sp-syntax-punctuation">,</span>
    <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span>
  <span class="sp-syntax-punctuation">}</span>
<span class="sp-syntax-punctuation">}</span>

<span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">addNewNote</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">title</span> = <span class="sp-syntax-string">&#x27;&#x27;</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">body</span> = <span class="sp-syntax-string">&#x27;&#x27;</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-keyword">void</span> <span class="sp-syntax-punctuation">{</span>
  <span class="sp-syntax-plain">AppState</span>.<span class="sp-syntax-property">set</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">previousState</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span>
    <span class="sp-syntax-keyword">let</span> <span class="sp-syntax-plain">newId</span><span class="sp-syntax-punctuation">:</span> string
    <span class="sp-syntax-keyword">do</span> <span class="sp-syntax-punctuation">{</span> <span class="sp-syntax-plain">newId</span> = <span class="sp-syntax-definition">getRandomId</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">}</span> <span class="sp-syntax-keyword">while</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">previousState</span><span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">newId</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">)</span>
    <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">{</span>
      <span class="sp-syntax-punctuation">...</span><span class="sp-syntax-plain">previousState</span><span class="sp-syntax-punctuation">,</span>
      <span class="sp-syntax-property">notes</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-punctuation">{</span>
        <span class="sp-syntax-punctuation">...</span><span class="sp-syntax-plain">previousState</span>.<span class="sp-syntax-property">notes</span><span class="sp-syntax-punctuation">,</span>
        <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">newId</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-punctuation">{</span>
          <span class="sp-syntax-property">title</span><span class="sp-syntax-punctuation">,</span>
          <span class="sp-syntax-property">body</span><span class="sp-syntax-punctuation">,</span>
        <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span>
      <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span>
      <span class="sp-syntax-property">currentlyPreviewing</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-plain">newId</span><span class="sp-syntax-punctuation">,</span>
    <span class="sp-syntax-punctuation">}</span>
  <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">)</span>
<span class="sp-syntax-punctuation">}</span>

<span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">addNewNoteHandler</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span>
  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-definition">addNewNote</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span>
<span class="sp-syntax-punctuation">}</span>

<span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">removeNote</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">noteId</span><span class="sp-syntax-punctuation">:</span> string<span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-keyword">void</span> <span class="sp-syntax-punctuation">{</span>
  <span class="sp-syntax-plain">AppState</span>.<span class="sp-syntax-property">set</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">previousState</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span>
    <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">originalIndex</span> = <span class="sp-syntax-plain">Object</span>.<span class="sp-syntax-property">keys</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">previousState</span>.<span class="sp-syntax-property">notes</span><span class="sp-syntax-punctuation">)</span>.<span class="sp-syntax-property">findIndex</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">id</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-plain">id</span> === <span class="sp-syntax-plain">noteId</span><span class="sp-syntax-punctuation">)</span>
    <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-punctuation">{</span> <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">noteId</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-plain">_toExclude</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-punctuation">...</span><span class="sp-syntax-plain">nextNotes</span> <span class="sp-syntax-punctuation">}</span> = <span class="sp-syntax-plain">previousState</span>.<span class="sp-syntax-property">notes</span>
    <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">nextIds</span> = <span class="sp-syntax-plain">Object</span>.<span class="sp-syntax-property">keys</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">nextNotes</span><span class="sp-syntax-punctuation">)</span>
    <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">nextPreviewId</span> = <span class="sp-syntax-plain">nextIds</span><span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">min</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">max</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-static">0</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">originalIndex</span> - <span class="sp-syntax-static">1</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">nextIds</span>.<span class="sp-syntax-property">length</span> - <span class="sp-syntax-static">1</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">]</span>
    <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">{</span>
      <span class="sp-syntax-punctuation">...</span><span class="sp-syntax-plain">previousState</span><span class="sp-syntax-punctuation">,</span>
      <span class="sp-syntax-property">notes</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-plain">nextNotes</span><span class="sp-syntax-punctuation">,</span>
      <span class="sp-syntax-property">currentlyPreviewing</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-plain">nextPreviewId</span><span class="sp-syntax-punctuation">,</span>
    <span class="sp-syntax-punctuation">}</span>
  <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">)</span>
<span class="sp-syntax-punctuation">}</span>

<span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">onChangeNoteTitle</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">noteId</span><span class="sp-syntax-punctuation">:</span> string<span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span>
  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">e</span><span class="sp-syntax-punctuation">:</span> ChangeEvent&lt;HTMLInputElement&gt;<span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span>
    <span class="sp-syntax-plain">AppState</span>.<span class="sp-syntax-property">set</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">previousState</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">{</span>
      <span class="sp-syntax-punctuation">...</span><span class="sp-syntax-plain">previousState</span><span class="sp-syntax-punctuation">,</span>
      <span class="sp-syntax-property">notes</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-punctuation">{</span>
        <span class="sp-syntax-punctuation">...</span><span class="sp-syntax-plain">previousState</span>.<span class="sp-syntax-property">notes</span><span class="sp-syntax-punctuation">,</span>
        <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">noteId</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-punctuation">{</span>
          <span class="sp-syntax-punctuation">...</span><span class="sp-syntax-plain">previousState</span>.<span class="sp-syntax-property">notes</span><span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">noteId</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">,</span>
          <span class="sp-syntax-property">title</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-plain">e</span>.<span class="sp-syntax-property">target</span>.<span class="sp-syntax-property">value</span><span class="sp-syntax-punctuation">,</span>
        <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span>
      <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span>
    <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span>
  <span class="sp-syntax-punctuation">}</span>
<span class="sp-syntax-punctuation">}</span>

<span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">onChangeNoteBody</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">noteId</span><span class="sp-syntax-punctuation">:</span> string<span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span>
  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">e</span><span class="sp-syntax-punctuation">:</span> ChangeEvent&lt;HTMLTextAreaElement&gt;<span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span>
    <span class="sp-syntax-plain">AppState</span>.<span class="sp-syntax-property">set</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">previousState</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">{</span>
      <span class="sp-syntax-punctuation">...</span><span class="sp-syntax-plain">previousState</span><span class="sp-syntax-punctuation">,</span>
      <span class="sp-syntax-property">notes</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-punctuation">{</span>
        <span class="sp-syntax-punctuation">...</span><span class="sp-syntax-plain">previousState</span>.<span class="sp-syntax-property">notes</span><span class="sp-syntax-punctuation">,</span>
        <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">noteId</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-punctuation">{</span>
          <span class="sp-syntax-punctuation">...</span><span class="sp-syntax-plain">previousState</span>.<span class="sp-syntax-property">notes</span><span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">noteId</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">,</span>
          <span class="sp-syntax-property">body</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-plain">e</span>.<span class="sp-syntax-property">target</span>.<span class="sp-syntax-property">value</span><span class="sp-syntax-punctuation">,</span>
        <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span>
      <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span>
    <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span>
  <span class="sp-syntax-punctuation">}</span>
<span class="sp-syntax-punctuation">}</span>

<span class="sp-syntax-keyword">export</span> <span class="sp-syntax-keyword">default</span> <span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">App</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">:</span> JSX.Element <span class="sp-syntax-punctuation">{</span>
  <span class="sp-syntax-definition">useEffect</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span>
    <span class="sp-syntax-comment">// Populate state with some data</span>
    <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">firstNoteId</span> = <span class="sp-syntax-string">&#x27;ZPM9XQ7i8G4Lh569ouOw&#x27;</span>
    <span class="sp-syntax-plain">AppState</span>.<span class="sp-syntax-property">set</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">previousState</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">{</span>
      <span class="sp-syntax-punctuation">...</span><span class="sp-syntax-plain">previousState</span><span class="sp-syntax-punctuation">,</span>
      <span class="sp-syntax-property">currentlyPreviewing</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-plain">firstNoteId</span><span class="sp-syntax-punctuation">,</span>
      <span class="sp-syntax-property">notes</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-punctuation">{</span>
        <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">firstNoteId</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-punctuation">{</span>
          <span class="sp-syntax-property">title</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-string">&#x27;Hello, world!&#x27;</span><span class="sp-syntax-punctuation">,</span>
          <span class="sp-syntax-property">body</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-string">&#x27;How are you?&#x27;</span><span class="sp-syntax-punctuation">,</span>
        <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span>
        <span class="sp-syntax-string">&#x27;RjE5ICD3x0IuBCaSB5Q9&#x27;</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-punctuation">{</span>
          <span class="sp-syntax-property">title</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-string">&#x27;Lorem ipsum&#x27;</span><span class="sp-syntax-punctuation">,</span>
          <span class="sp-syntax-property">body</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-string">&#x27;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&#x27;</span><span class="sp-syntax-punctuation">,</span>
        <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span>
        <span class="sp-syntax-string">&#x27;OP2842RclzxswovKcO8A&#x27;</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-punctuation">{</span>
          <span class="sp-syntax-property">title</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-string">&#x27;Click for here a surprise&#x27;</span><span class="sp-syntax-punctuation">,</span>
          <span class="sp-syntax-property">body</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-string">&#x27;Never gonna give you up\nNever gonna let you down\nNever gonna run around and desert you&#x27;</span><span class="sp-syntax-punctuation">,</span>
        <span class="sp-syntax-punctuation">}</span>
      <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span>
    <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span>
  <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">)</span>
  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">(</span>
    <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">div</span> <span class="sp-syntax-property">className</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">styles</span>.<span class="sp-syntax-property">container</span><span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">&gt;</span>
      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-definition">Sidebar</span> <span class="sp-syntax-punctuation">/&gt;</span>
      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-definition">Editor</span> <span class="sp-syntax-punctuation">/&gt;</span>
    <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">div</span><span class="sp-syntax-punctuation">&gt;</span>
  <span class="sp-syntax-punctuation">)</span>
<span class="sp-syntax-punctuation">}</span>

<span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">Sidebar</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">:</span> JSX.Element <span class="sp-syntax-punctuation">{</span>
  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">currentlyPreviewing</span> = <span class="sp-syntax-definition">useStateValue</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">AppState</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">state</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-plain">state</span>.<span class="sp-syntax-property">currentlyPreviewing</span><span class="sp-syntax-punctuation">)</span>
  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">notes</span> = <span class="sp-syntax-definition">useDeferredValue</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-definition">useStateValue</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">AppState</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">state</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-plain">state</span>.<span class="sp-syntax-property">notes</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span>
  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">renderStack</span> = <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-punctuation">]</span>
  <span class="sp-syntax-keyword">for</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">id</span> <span class="sp-syntax-keyword">in</span> <span class="sp-syntax-plain">notes</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span>
    <span class="sp-syntax-plain">renderStack</span>.<span class="sp-syntax-property">push</span><span class="sp-syntax-punctuation">(</span>
      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-definition">SidebarItem</span>
        <span class="sp-syntax-property">key</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">id</span><span class="sp-syntax-punctuation">}</span>
        <span class="sp-syntax-property">id</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">id</span><span class="sp-syntax-punctuation">}</span>
        <span class="sp-syntax-property">isPreviewing</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">id</span> === <span class="sp-syntax-plain">currentlyPreviewing</span><span class="sp-syntax-punctuation">}</span>
        <span class="sp-syntax-property">value</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">notes</span><span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">id</span><span class="sp-syntax-punctuation">]</span>.<span class="sp-syntax-property">title</span><span class="sp-syntax-punctuation">}</span>
      <span class="sp-syntax-punctuation">/&gt;</span>
    <span class="sp-syntax-punctuation">)</span>
  <span class="sp-syntax-punctuation">}</span>
  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">(</span>
    <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">div</span> <span class="sp-syntax-property">className</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">styles</span>.<span class="sp-syntax-property">sidebarContainer</span><span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">&gt;</span>
      <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">renderStack</span><span class="sp-syntax-punctuation">}</span>
      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">div</span>
        <span class="sp-syntax-property">className</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">styles</span>.<span class="sp-syntax-property">sidebarItemContainer</span><span class="sp-syntax-punctuation">}</span>
        <span class="sp-syntax-property">onClick</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">addNewNoteHandler</span><span class="sp-syntax-punctuation">}</span>
        <span class="sp-syntax-property">role</span>=<span class="sp-syntax-string">&#x27;button&#x27;</span>
      <span class="sp-syntax-punctuation">&gt;</span>
        <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">b</span><span class="sp-syntax-punctuation">&gt;</span><span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">i</span><span class="sp-syntax-punctuation">&gt;</span>+ Add note<span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">i</span><span class="sp-syntax-punctuation">&gt;</span><span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">b</span><span class="sp-syntax-punctuation">&gt;</span>
      <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">div</span><span class="sp-syntax-punctuation">&gt;</span>
    <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">div</span><span class="sp-syntax-punctuation">&gt;</span>
  <span class="sp-syntax-punctuation">)</span>
<span class="sp-syntax-punctuation">}</span>

<span class="sp-syntax-keyword">interface</span> SidebarItemProps <span class="sp-syntax-punctuation">{</span>
  <span class="sp-syntax-property">id</span><span class="sp-syntax-punctuation">:</span> string
  <span class="sp-syntax-property">value</span><span class="sp-syntax-punctuation">:</span> string
  <span class="sp-syntax-property">isPreviewing</span><span class="sp-syntax-punctuation">:</span> boolean
<span class="sp-syntax-punctuation">}</span>

<span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">SidebarItem</span> = <span class="sp-syntax-definition">memo</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">{</span>
  <span class="sp-syntax-property">id</span><span class="sp-syntax-punctuation">,</span>
  <span class="sp-syntax-property">isPreviewing</span><span class="sp-syntax-punctuation">,</span>
  <span class="sp-syntax-property">value</span><span class="sp-syntax-punctuation">,</span>
<span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">:</span> SidebarItemProps<span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">:</span> JSX.Element <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span>

  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">onRemoveNote</span> = <span class="sp-syntax-definition">useCallback</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">e</span><span class="sp-syntax-punctuation">:</span> MouseEvent&lt;HTMLDivElement&gt;<span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span>
    <span class="sp-syntax-definition">removeNote</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">id</span><span class="sp-syntax-punctuation">)</span>
    <span class="sp-syntax-plain">e</span>.<span class="sp-syntax-property">preventDefault</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span>
  <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">id</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">)</span>

  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">(</span>
    <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">div</span>
      <span class="sp-syntax-property">className</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">styles</span>.<span class="sp-syntax-property">sidebarItemContainer</span><span class="sp-syntax-punctuation">}</span>
      <span class="sp-syntax-property">style</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-punctuation">{</span>
        <span class="sp-syntax-punctuation">...</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">isPreviewing</span> ? <span class="sp-syntax-punctuation">{</span> <span class="sp-syntax-property">backgroundColor</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-string">&#x27;#2b80ff40&#x27;</span> <span class="sp-syntax-punctuation">}</span> : <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">,</span>
        <span class="sp-syntax-property">gap</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-static">10</span><span class="sp-syntax-punctuation">,</span>
        <span class="sp-syntax-property">gridTemplateColumns</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-string">&#x27;1fr auto&#x27;</span><span class="sp-syntax-punctuation">,</span>
        <span class="sp-syntax-property">opacity</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-plain">value</span> ? <span class="sp-syntax-static">1</span> : <span class="sp-syntax-static">0.5</span><span class="sp-syntax-punctuation">,</span>
      <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">}</span>
      <span class="sp-syntax-property">onClick</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-definition">onSelectNote</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">id</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">}</span>
      <span class="sp-syntax-property">role</span>=<span class="sp-syntax-string">&#x27;button&#x27;</span>
    <span class="sp-syntax-punctuation">&gt;</span>
      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">span</span> <span class="sp-syntax-property">style</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">value</span> ? <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-punctuation">}</span> : <span class="sp-syntax-punctuation">{</span> <span class="sp-syntax-property">fontStyle</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-string">&#x27;italic&#x27;</span> <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">&gt;</span>
        <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">value</span> || <span class="sp-syntax-string">&#x27;(New note)&#x27;</span><span class="sp-syntax-punctuation">}</span>
      <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">span</span><span class="sp-syntax-punctuation">&gt;</span>
      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">div</span>
        <span class="sp-syntax-property">className</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">styles</span>.<span class="sp-syntax-property">removeNoteButton</span><span class="sp-syntax-punctuation">}</span>
        <span class="sp-syntax-property">onClick</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">onRemoveNote</span><span class="sp-syntax-punctuation">}</span>
        <span class="sp-syntax-property">role</span>=<span class="sp-syntax-string">&#x27;button&#x27;</span>
      <span class="sp-syntax-punctuation">&gt;</span>
        <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-string">&#x27;×&#x27;</span><span class="sp-syntax-punctuation">}</span>
      <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">div</span><span class="sp-syntax-punctuation">&gt;</span>
    <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">div</span><span class="sp-syntax-punctuation">&gt;</span>
  <span class="sp-syntax-punctuation">)</span>
<span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">)</span>

<span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">Editor</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">:</span> JSX.Element <span class="sp-syntax-punctuation">{</span>
  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">currentlyPreviewing</span> = <span class="sp-syntax-definition">useStateValue</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">AppState</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">state</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-plain">state</span>.<span class="sp-syntax-property">currentlyPreviewing</span><span class="sp-syntax-punctuation">)</span>
  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">currentNote</span> = <span class="sp-syntax-definition">useStateValue</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">AppState</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">state</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-plain">state</span>.<span class="sp-syntax-property">notes</span><span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">state</span>.<span class="sp-syntax-property">currentlyPreviewing</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">)</span>
  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">isPreviewingValidItem</span> = <span class="sp-syntax-plain">currentlyPreviewing</span> &amp;&amp; <span class="sp-syntax-plain">currentNote</span>
  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">(</span>
    <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">div</span> <span class="sp-syntax-property">className</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">styles</span>.<span class="sp-syntax-property">editorContainer</span><span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">&gt;</span>
      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">input</span>
        <span class="sp-syntax-property">className</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">styles</span>.<span class="sp-syntax-property">titleInput</span><span class="sp-syntax-punctuation">}</span>
        <span class="sp-syntax-property">disabled</span>=<span class="sp-syntax-punctuation">{</span>!<span class="sp-syntax-plain">isPreviewingValidItem</span><span class="sp-syntax-punctuation">}</span>
        <span class="sp-syntax-property">value</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">isPreviewingValidItem</span> ? <span class="sp-syntax-plain">currentNote</span>.<span class="sp-syntax-property">title</span> : <span class="sp-syntax-string">&#x27;&#x27;</span><span class="sp-syntax-punctuation">}</span>
        <span class="sp-syntax-property">onChange</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-definition">onChangeNoteTitle</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">currentlyPreviewing</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">}</span>
        <span class="sp-syntax-property">placeholder</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">isPreviewingValidItem</span> ? <span class="sp-syntax-string">&#x27;Title&#x27;</span> : <span class="sp-syntax-plain">undefined</span><span class="sp-syntax-punctuation">}</span>
      <span class="sp-syntax-punctuation">/&gt;</span>
      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">textarea</span>
        <span class="sp-syntax-property">className</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">styles</span>.<span class="sp-syntax-property">bodyTextArea</span><span class="sp-syntax-punctuation">}</span>
        <span class="sp-syntax-property">disabled</span>=<span class="sp-syntax-punctuation">{</span>!<span class="sp-syntax-plain">isPreviewingValidItem</span><span class="sp-syntax-punctuation">}</span>
        <span class="sp-syntax-property">value</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">isPreviewingValidItem</span> ? <span class="sp-syntax-plain">currentNote</span>.<span class="sp-syntax-property">body</span> : <span class="sp-syntax-string">&#x27;&#x27;</span><span class="sp-syntax-punctuation">}</span>
        <span class="sp-syntax-property">onChange</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-definition">onChangeNoteBody</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">currentlyPreviewing</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">}</span>
        <span class="sp-syntax-property">placeholder</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">isPreviewingValidItem</span>
          ? <span class="sp-syntax-string">&#x27;What\&#x27;s on your mind?&#x27;</span>
          : <span class="sp-syntax-string">&#x27;Select a note to begin editing&#x27;</span>
        <span class="sp-syntax-punctuation">}</span>
      <span class="sp-syntax-punctuation">/&gt;</span>
    <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">div</span><span class="sp-syntax-punctuation">&gt;</span>
  <span class="sp-syntax-punctuation">)</span>
<span class="sp-syntax-punctuation">}</span>

<span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">getRandomId</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">:</span> string <span class="sp-syntax-punctuation">{</span>
  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">charset</span> = <span class="sp-syntax-string">&#x27;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&#x27;</span>
  <span class="sp-syntax-keyword">let</span> <span class="sp-syntax-plain">hash</span> = <span class="sp-syntax-string">&#x27;&#x27;</span>
  <span class="sp-syntax-keyword">while</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">hash</span>.<span class="sp-syntax-property">length</span> &lt; <span class="sp-syntax-static">20</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span>
    <span class="sp-syntax-plain">hash</span> += <span class="sp-syntax-plain">charset</span><span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">floor</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">random</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> * <span class="sp-syntax-plain">charset</span>.<span class="sp-syntax-property">length</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">]</span>
  <span class="sp-syntax-punctuation">}</span>
  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-plain">hash</span>
<span class="sp-syntax-punctuation">}</span>

</pre></div></div></div><div class="sp-c-gvjhpQ sp-c-gvjhpQ-xpXQZ-direction-horizontal sp-resize-handler" data-direction="horizontal" style="left:calc(50% - 5px)"></div><div class="sp-c-euXojQ sp-preview sp-stack" style="flex-grow:50;flex-shrink:50;flex-basis:0;width:50%;gap:0;height:500px"><div class="sp-c-juMdfR sp-preview-container"><iframe class="sp-c-fgviib sp-preview-iframe" title="Sandpack Preview"></iframe><div class="sp-c-kwibBT sp-preview-actions"><a href="https://codesandbox.io/api/v1/sandboxes/define?undefined&amp;environment=undefined" rel="noreferrer noopener" target="_blank" title="Open in CodeSandbox" class="sp-icon-standalone sp-c-bxeRRt sp-c-gMfcns sp-c-dEbKhQ sp-button"><svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" stroke="currentColor"><title>Open on CodeSandbox</title><path d="M6.66665 3.33337H4.33331C3.78103 3.33337 3.33331 3.78109 3.33331 4.33337V11.6667C3.33331 12.219 3.78103 12.6667 4.33331 12.6667H11.6666C12.2189 12.6667 12.6666 12.219 12.6666 11.6667V9.33337" stroke-linecap="round"></path><path d="M10 3.33337H12.5667C12.6219 3.33337 12.6667 3.37815 12.6667 3.43337V6.00004" stroke-linecap="round"></path><path d="M7.33331 8.66668L12.5333 3.46667" stroke-linecap="round"></path></svg><span>Open Sandbox</span></a></div></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 GlyphCat</div></div></div></footer></div>
</body>
</html>
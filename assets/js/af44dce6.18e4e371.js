"use strict";(self.webpackChunkcotton_box_docs=self.webpackChunkcotton_box_docs||[]).push([[560],{4749:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var o=n(4848),s=n(8453),a=n(3357),r=n(9235);const i={sidebar_position:4},c="Opt Out of Re-renders Due To State Change",l={id:"learn/react/opt-out-of-rerenders",title:"Opt Out of Re-renders Due To State Change",description:"Occasionally, we might want to opt out of watching the state. This can be done by passing a third parameter. If we do not need to use a selector, we can pass null as the second parameter.",source:"@site/docs/learn/react/opt-out-of-rerenders.mdx",sourceDirName:"learn/react",slug:"/learn/react/opt-out-of-rerenders",permalink:"/cotton-box/docs/learn/react/opt-out-of-rerenders",draft:!1,unlisted:!1,editUrl:"https://github.com/glyph-cat/cotton-box/tree/main/packages/docs/docs/learn/react/opt-out-of-rerenders.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"learnSidebar",previous:{title:"Selectors",permalink:"/cotton-box/docs/learn/react/selectors"},next:{title:"Hiding values from React Developer Tools",permalink:"/cotton-box/docs/learn/react/hiding-values-from-react-developer-tools"}},d={},u=[{value:"Full Example",id:"full-example",level:2}];function p(e){const t={admonition:"admonition",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"opt-out-of-re-renders-due-to-state-change",children:"Opt Out of Re-renders Due To State Change"}),"\n",(0,o.jsxs)(t.p,{children:["Occasionally, we might want to opt out of watching the state. This can be done by passing a third parameter. If we do not need to use a selector, we can pass ",(0,o.jsx)(t.code,{children:"null"})," as the second parameter."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",children:"import { useState } from 'react'\nimport { useStateValue } from '{:REACT_PACKAGE_NAME:}'\n\nfunction App(): JSX.Element {\n  const [active, setActive] = useState(true)\n  const state = useStateValue(ExampleState, null, active)\n  return '...'\n}\n"})}),"\n",(0,o.jsxs)(t.p,{children:["The third parameter is a ",(0,o.jsx)(t.code,{children:"boolean"})," flag that defaults to ",(0,o.jsx)(t.code,{children:"true"}),". When set to ",(0,o.jsx)(t.code,{children:"true"}),", the hook will observe state changes normally, when set to ",(0,o.jsx)(t.code,{children:"false"}),", it will stop watching for state changes until it is set back to ",(0,o.jsx)(t.code,{children:"true"})," again."]}),"\n",(0,o.jsx)(t.admonition,{type:"note",children:(0,o.jsxs)(t.p,{children:["Setting the third parameter to ",(0,o.jsx)(t.code,{children:"false"})," does not prevent the State Manager itself from changing state, but rather, it is just blocking the hook from watching for state changes."]})}),"\n",(0,o.jsx)(t.h2,{id:"full-example",children:"Full Example"}),"\n",(0,o.jsx)(r.I,{code:a.A})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},9235:(e,t,n)=>{n.d(t,{I:()=>f,P:()=>x});var o=n(4477),s=n(9047),a=n(8553),r=n(6540),i=n(4848);const c="index.js",l="App.tsx",d="styles.css",u="index.module.css",p=!1,h={[c]:["import { createRoot } from 'react-dom/client'","import App from './App.tsx'",`import './${d}'`,"","const root = createRoot(document.getElementById('root'))","root.render(<App />)",""].join("\n"),[d]:["body {","  font-family: sans-serif;","  -webkit-font-smoothing: auto;","  -moz-font-smoothing: auto;","  -moz-osx-font-smoothing: grayscale;","  font-smoothing: auto;","  text-rendering: optimizeLegibility;","  font-smooth: always;","  -webkit-tap-highlight-color: transparent;","  -webkit-touch-callout: none;","}"].join("\n"),"package.json":["{",`  "main": "${c}",`,'  "dependencies": {','    "react": "^18.0.0",','    "react-dom": "^18.0.0",','    "react-scripts": "^5.0.0"',"  }","}"].join("\n"),"public/index.html":["<!DOCTYPE html>",'<html lang="en">',"  <head>",'    <meta charset="UTF-8">','    <meta name="viewport" content="width=device-width, initial-scale=1.0">',"    <title>Example</title>","  </head>","  <body>",'    <div id="root"></div>',"  </body>","</html>"].join("\n")},m={theme:s.$o,customSetup:{dependencies:{"cotton-box":"latest","cotton-box-react":"latest"}},options:{editorWidthPercentage:65,editorHeight:"45vh",showLineNumbers:!0,showRefreshButton:!0,showTabs:!1,wrapContent:!0}};function f(e){let{code:t,css:n,extraDependencies:s,options:a}=e;return(0,i.jsx)(i.Fragment,{children:p?(0,i.jsx)(o.l5,{files:{...h,[l]:t,...n?{[u]:n}:{}},...m,customSetup:{...m.customSetup,entry:c,dependencies:{...m.customSetup.dependencies,...s}},options:{...m.options,activeFile:l,showConsole:/console\./.test(t),...a},children:(0,i.jsxs)(o.am,{children:[(0,i.jsx)(g,{}),(0,i.jsx)(o.G5,{})]})}):(0,i.jsx)(o.OZ,{files:{...h,[l]:t,...n?{[u]:n}:{}},...m,customSetup:{...m.customSetup,entry:c,dependencies:{...m.customSetup.dependencies,...s}},options:{...m.options,activeFile:l,showConsole:/console\./.test(t),...a}})})}function x(e){let{code:t}=e;return(0,i.jsx)(i.Fragment,{children:p?(0,i.jsx)(o.l5,{files:{[c]:t},...m,customSetup:{...m.customSetup,entry:c},options:{...m.options,activeFile:c},children:(0,i.jsxs)(o.am,{children:[(0,i.jsx)(g,{}),(0,i.jsx)(o.X2,{})]})}):(0,i.jsx)(o.OZ,{files:{[c]:t},...m,customSetup:{...m.customSetup,entry:c},options:{...m.options,activeFile:c,layout:"console"}})})}function g(){const{code:e,updateCode:t}=(0,o.Pe)(),{sandpack:n}=(0,o.ny)();return(0,i.jsx)(o.aN,{children:(0,i.jsx)("div",{style:{flex:1},children:(0,i.jsx)(a.Ay,{language:"typescript",theme:"vs-dark",defaultValue:e,onChange:(0,r.useCallback)((e=>t(e||"")),[t]),options:{fontSize:14,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on"}},n.activeFile)})})}},3357:(e,t,n)=>{n.d(t,{A:()=>o});const o="import { StateManager } from 'cotton-box'\nimport { useStateValue } from 'cotton-box-react'\nimport { useCallback, useState } from 'react'\n\nexport default function App(): JSX.Element {\n  const [active, setActive] = useState(true)\n  const toggleActiveness = useCallback(() => { setActive(a => !a) }, [])\n  const user = useStateValue(UserState, null, active)\n  console.log('App is rendering...')\n  return (\n    <div>\n      <h1>Hello, {user.firstName} {user.lastName}!</h1>\n      <h2>Your lucky number is {user.luckyNumber ?? '...'}</h2>\n      <button onClick={rollLuckyNumber}>Roll lucky number</button>\n      <button onClick={toggleActiveness}>\n        {active ? 'Pause watching' : 'Start watching'}\n      </button>\n    </div>\n  )\n}\n\ninterface IUserState {\n  firstName: string\n  lastName: string\n  luckyNumber: number\n}\n\nconst UserState = new StateManager<IUserState>({\n  firstName: 'John',\n  lastName: 'Smith',\n  luckyNumber: null,\n})\n\nfunction rollLuckyNumber(): void {\n  UserState.set((previousState) => ({\n    ...previousState,\n    luckyNumber: Math.round(Math.random() * 100),\n  }))\n}\n"}}]);
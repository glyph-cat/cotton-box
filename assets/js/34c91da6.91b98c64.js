"use strict";(self.webpackChunkcotton_box_docs=self.webpackChunkcotton_box_docs||[]).push([[6856],{4708:(e,t,n)=>{n.d(t,{IG:()=>b,P3:()=>j});var i=n(9665),o=n(9047),a=n(8532),s=n(8553),r=n(3639),l=n(6540),c=n(4848);const d="index.js",u="App.tsx",m="styles.css",p="index.module.css",h=!1,x={[d]:["import { createRoot } from 'react-dom/client'","import App from './App.tsx'",`import './${m}'`,"","const root = createRoot(document.getElementById('root'))","root.render(<App />)",""].join("\n"),[m]:["body {","  font-family: sans-serif;","  -webkit-font-smoothing: auto;","  -moz-font-smoothing: auto;","  -moz-osx-font-smoothing: grayscale;","  font-smoothing: auto;","  text-rendering: optimizeLegibility;","  font-smooth: always;","  -webkit-tap-highlight-color: transparent;","  -webkit-touch-callout: none;","}"].join("\n"),"package.json":["{",`  "main": "${d}",`,'  "dependencies": {','    "react": "^18.0.0",','    "react-dom": "^18.0.0",','    "react-scripts": "^5.0.0"',"  }","}"].join("\n"),"public/index.html":["<!DOCTYPE html>",'<html lang="en">',"  <head>",'    <meta charset="UTF-8">','    <meta name="viewport" content="width=device-width, initial-scale=1.0">',"    <title>Example</title>","  </head>","  <body>",'    <div id="root"></div>',"  </body>","</html>"].join("\n")};function g(){const{colorMode:e}=(0,a.G)();return"light"===e?o.Zw:o.$o}const f={customSetup:{dependencies:{"cotton-box":"latest","cotton-box-react":"latest"}},options:{editorWidthPercentage:65,editorHeight:"45vh",showLineNumbers:!0,showRefreshButton:!0,showTabs:!1,wrapContent:!0}};function b(e){return(0,r.i)()?(0,c.jsx)(S,{...e}):null}function S(e){let{code:t,css:n,extraDependencies:o,options:a}=e;const s=g();return(0,c.jsx)(c.Fragment,{children:h?(0,c.jsx)(i.l5,{files:{...x,[u]:t,...n?{[p]:n}:{}},...f,theme:s,customSetup:{...f.customSetup,entry:d,dependencies:{...f.customSetup.dependencies,...o}},options:{...f.options,activeFile:u,showConsole:/console\./.test(t),...a},children:(0,c.jsxs)(i.am,{children:[(0,c.jsx)(y,{}),(0,c.jsx)(i.G5,{})]})}):(0,c.jsx)(i.OZ,{files:{...x,[u]:t,...n?{[p]:n}:{}},...f,theme:s,customSetup:{...f.customSetup,entry:d,dependencies:{...f.customSetup.dependencies,...o}},options:{...f.options,activeFile:u,showConsole:/console\./.test(t),...a}})})}function j(e){return(0,r.i)()?(0,c.jsx)(v,{...e}):null}function v(e){let{code:t}=e;const n=g();return(0,c.jsx)(c.Fragment,{children:h?(0,c.jsx)(i.l5,{files:{[d]:t},...f,theme:n,customSetup:{...f.customSetup,entry:d},options:{...f.options,activeFile:d},children:(0,c.jsxs)(i.am,{children:[(0,c.jsx)(y,{}),(0,c.jsx)(i.X2,{})]})}):(0,c.jsx)(i.OZ,{files:{[d]:t},...f,theme:n,customSetup:{...f.customSetup,entry:d},options:{...f.options,activeFile:d,layout:"console"}})})}function y(){const{code:e,updateCode:t}=(0,i.Pe)(),{sandpack:n}=(0,i.ny)();return(0,c.jsx)(i.aN,{children:(0,c.jsx)("div",{style:{flex:1},children:(0,c.jsx)(s.Ay,{language:"typescript",theme:"vs-dark",defaultValue:e,onChange:(0,l.useCallback)((e=>t(e||"")),[t]),options:{fontSize:14,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on"}},n.activeFile)})})}},6367:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>m});const i=JSON.parse('{"id":"learn/react/observing-initialization-state","title":"Observing Initialization State","description":"To determine if a state is initializing, we can use the .isInitializing property. It is a  ReadOnlyStateManager where only the .get, .watch and .wait methods are available.","source":"@site/docs/learn/react/observing-initialization-state.mdx","sourceDirName":"learn/react","slug":"/learn/react/observing-initialization-state","permalink":"/cotton-box/docs/learn/react/observing-initialization-state","draft":false,"unlisted":false,"editUrl":"https://github.com/glyph-cat/cotton-box/tree/main/packages/docs/docs/learn/react/observing-initialization-state.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"learnSidebar","previous":{"title":"Selectors","permalink":"/cotton-box/docs/learn/react/selectors"},"next":{"title":"Opt Out of Re-renders Due To State Change","permalink":"/cotton-box/docs/learn/react/opt-out-of-rerenders"}}');var o=n(4848),a=n(8453);const s="import { StateManager } from 'cotton-box'\nimport { useSimpleStateValue, useStateValue } from 'cotton-box-react'\nimport { JSX } from 'react'\n\nexport default function App(): JSX.Element {\n  const isInitializing = useSimpleStateValue(UserState.isInitializing)\n  return (\n    <>\n      <button onClick={UserState.reinitialize}>Reinitialize</button>\n      {isInitializing\n        ? <div>Loading...</div>\n        : <SubComponent />\n      }\n    </>\n  )\n}\n\nfunction SubComponent(): JSX.Element {\n  const user = useStateValue(UserState)\n  return (\n    <div>\n      <h1>Hello, {user.firstName} {user.lastName}!</h1>\n    </div>\n  )\n}\n\ninterface IUserState {\n  firstName: string\n  lastName: string\n  luckyNumber: number\n}\n\nconst UserState = new StateManager<IUserState>(null, {\n  lifecycle: {\n    async init({ commit }) {\n      await delay(1000)\n      commit({\n        firstName: 'John',\n        lastName: 'Smith',\n        luckyNumber: null,\n      })\n    },\n  }\n})\n\nfunction delay(timeout: number): Promise<void> {\n  return new Promise((resolve) => {\n    setTimeout(resolve, timeout)\n  })\n}\n";var r=n(7869),l=n(4708);const c={sidebar_position:4},d="Observing Initialization State",u={},m=[{value:"Example",id:"example",level:2}];function p(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"observing-initialization-state",children:"Observing Initialization State"})}),"\n",(0,o.jsxs)(t.p,{children:["To determine if a state is initializing, we can use the ",(0,o.jsx)(t.code,{children:".isInitializing"})," property. It is a  ",(0,o.jsx)(r.L,{href:"../../api/core/StateManagerInitArgs",children:"ReadOnlyStateManager"})," where only the ",(0,o.jsx)(t.code,{children:".get"}),", ",(0,o.jsx)(t.code,{children:".watch"})," and ",(0,o.jsx)(t.code,{children:".wait"})," methods are available."]}),"\n",(0,o.jsxs)(t.p,{children:["In React, we would ",(0,o.jsx)(r.L,{href:"../../api/react/useSimpleStateValue",children:"useSimpleStateValue"})," to subscribe to the changes of this read-only State Manager as demonstrated in the example below:"]}),"\n",(0,o.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,o.jsx)(l.IG,{code:s})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}}}]);
"use strict";(self.webpackChunkcotton_box_docs=self.webpackChunkcotton_box_docs||[]).push([[2678],{90:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var o=n(4848),a=n(8453);const s="import { StateManager } from 'cotton-box'\n\nconst CounterState = new StateManager(0)\n\nconst collectedValues: Array<number> = []\nconst unwatch = CounterState.watch((state) => {\n  collectedValues.push(state)\n  if (collectedValues.length >= 10) {\n    console.log('Successfully collected 10 numbers')\n    clearInterval(intervalRef)\n    unwatch()\n  }\n})\n\nconst intervalRef = setInterval(() => {\n  // Generate random number between 1 to 100\n  CounterState.set(1 + Math.floor(Math.random() * 100))\n}, 1000)\n";var c=n(9235);const i={sidebar_position:3},r="Watching For State Changes",l={id:"learn/tutorial/watching-for-state-changes",title:"Watching For State Changes",description:"We can create a watcher to observe state changes with the .watch method.",source:"@site/docs/learn/tutorial/watching-for-state-changes.mdx",sourceDirName:"learn/tutorial",slug:"/learn/tutorial/watching-for-state-changes",permalink:"/cotton-box/docs/learn/tutorial/watching-for-state-changes",draft:!1,unlisted:!1,editUrl:"https://github.com/glyph-cat/cotton-box/tree/main/packages/docs/docs/learn/tutorial/watching-for-state-changes.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"learnSidebar",previous:{title:"Quick Start",permalink:"/cotton-box/docs/learn/tutorial/quick-start"},next:{title:"Waiting For State Change",permalink:"/cotton-box/docs/learn/tutorial/waiting-for-state-change"}},h={},d=[{value:"Example",id:"example",level:2}];function u(e){const t={code:"code",h1:"h1",h2:"h2",p:"p",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"watching-for-state-changes",children:"Watching For State Changes"}),"\n",(0,o.jsxs)(t.p,{children:["We can create a watcher to observe state changes with the ",(0,o.jsx)(t.code,{children:".watch"})," method."]}),"\n",(0,o.jsx)(t.p,{children:"It accepts a callback function as its parameter and it will be invoked whenever the state changes."}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.code,{children:".watch"})," method returns a callback, that when called, will remove the watcher."]}),"\n",(0,o.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,o.jsxs)(t.p,{children:["In the example below, we have an interval that sets the ",(0,o.jsx)(t.code,{children:"CounterState"})," with random numbers every second."]}),"\n",(0,o.jsx)(t.p,{children:"A watcher is added to observe these changes and it will push the state values into an array. Once the array has 10 numbers, the unwatch function is called to stop watching."}),"\n",(0,o.jsx)(c.P,{code:s})]})}function p(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},9235:(e,t,n)=>{n.d(t,{I:()=>g,P:()=>x});var o=n(4477),a=n(9047),s=n(8553),c=n(6540),i=n(4848);const r="index.js",l="App.tsx",h="styles.css",d="index.module.css",u=!1,p={[r]:["import { createRoot } from 'react-dom/client'","import App from './App.tsx'",`import './${h}'`,"","const root = createRoot(document.getElementById('root'))","root.render(<App />)",""].join("\n"),[h]:["body {","  font-family: sans-serif;","  -webkit-font-smoothing: auto;","  -moz-font-smoothing: auto;","  -moz-osx-font-smoothing: grayscale;","  font-smoothing: auto;","  text-rendering: optimizeLegibility;","  font-smooth: always;","  -webkit-tap-highlight-color: transparent;","  -webkit-touch-callout: none;","}"].join("\n"),"package.json":["{",`  "main": "${r}",`,'  "dependencies": {','    "react": "^18.0.0",','    "react-dom": "^18.0.0",','    "react-scripts": "^5.0.0"',"  }","}"].join("\n"),"public/index.html":["<!DOCTYPE html>",'<html lang="en">',"  <head>",'    <meta charset="UTF-8">','    <meta name="viewport" content="width=device-width, initial-scale=1.0">',"    <title>Example</title>","  </head>","  <body>",'    <div id="root"></div>',"  </body>","</html>"].join("\n")},m={theme:a.$o,customSetup:{dependencies:{"cotton-box":"latest","cotton-box-react":"latest"}},options:{editorWidthPercentage:65,editorHeight:"45vh",showLineNumbers:!0,showRefreshButton:!0,showTabs:!1,wrapContent:!0}};function g(e){let{code:t,css:n,extraDependencies:a,options:s}=e;return(0,i.jsx)(i.Fragment,{children:u?(0,i.jsx)(o.l5,{files:{...p,[l]:t,...n?{[d]:n}:{}},...m,customSetup:{...m.customSetup,entry:r,dependencies:{...m.customSetup.dependencies,...a}},options:{...m.options,activeFile:l,showConsole:/console\./.test(t),...s},children:(0,i.jsxs)(o.am,{children:[(0,i.jsx)(w,{}),(0,i.jsx)(o.G5,{})]})}):(0,i.jsx)(o.OZ,{files:{...p,[l]:t,...n?{[d]:n}:{}},...m,customSetup:{...m.customSetup,entry:r,dependencies:{...m.customSetup.dependencies,...a}},options:{...m.options,activeFile:l,showConsole:/console\./.test(t),...s}})})}function x(e){let{code:t}=e;return(0,i.jsx)(i.Fragment,{children:u?(0,i.jsx)(o.l5,{files:{[r]:t},...m,customSetup:{...m.customSetup,entry:r},options:{...m.options,activeFile:r},children:(0,i.jsxs)(o.am,{children:[(0,i.jsx)(w,{}),(0,i.jsx)(o.X2,{})]})}):(0,i.jsx)(o.OZ,{files:{[r]:t},...m,customSetup:{...m.customSetup,entry:r},options:{...m.options,activeFile:r,layout:"console"}})})}function w(){const{code:e,updateCode:t}=(0,o.Pe)(),{sandpack:n}=(0,o.ny)();return(0,i.jsx)(o.aN,{children:(0,i.jsx)("div",{style:{flex:1},children:(0,i.jsx)(s.Ay,{language:"typescript",theme:"vs-dark",defaultValue:e,onChange:(0,c.useCallback)((e=>t(e||"")),[t]),options:{fontSize:14,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on"}},n.activeFile)})})}}}]);